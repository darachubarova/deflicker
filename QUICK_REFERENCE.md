# üöÄ –ë—ã—Å—Ç—Ä—ã–π –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ - –®–ø–∞—Ä–≥–∞–ª–∫–∞ –¥–ª—è –°—Ç—É–¥–µ–Ω—Ç–∞

## 30-—Å–µ–∫—É–Ω–¥–Ω—ã–π –û–±–∑–æ—Ä (–¥–ª—è –Ω–∞—á–∞–ª–∞ –æ—Ç–≤–µ—Ç–∞)

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –Ω–æ—É—Ç–±—É–∫?**

> "–≠—Ç–æ—Ç –Ω–æ—É—Ç–±—É–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –º–∞—Å–∫–∏ –≤–∏–¥–µ–æ. –°–Ω–∞—á–∞–ª–∞ –º—ã –∑–∞–≥—Ä—É–∂–∞–µ–º –≤–∏–¥–µ–æ, –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–µ–π—Ä–æ—Å–µ—Ç—å DeepLabv3 –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ–ª–æ–≤–µ–∫–∞). –ü–æ–ª—É—á–∞–µ—Ç—Å—è –º–∞—Å–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –º–µ—Ä—Ü–∞–µ—Ç –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏. –ó–∞—Ç–µ–º –º—ã –ø—Ä–∏–º–µ–Ω—è–µ–º —Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è: Moving Average, Median Filter –∏ Exponential Smoothing. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –º–µ—Ç–æ–¥–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –º–µ—Ç—Ä–∏–∫—É IoU, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Å—Ç–∞–±–∏–ª—å–Ω–∞ –º–∞—Å–∫–∞ –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏. –í –∫–æ–Ω—Ü–µ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –≤—ã–±–∏—Ä–∞–µ–º –ª—É—á—à–∏–π –º–µ—Ç–æ–¥."

---

## üîë –û—Å–Ω–æ–≤–Ω—ã–µ –¢–µ—Ä–º–∏–Ω—ã

| –¢–µ—Ä–º–∏–Ω | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ | –§–æ—Ä–º—É–ª–∞/–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|--------|-------------|-------------------|
| **–ú–µ—Ä—Ü–∞–Ω–∏–µ** | –ù–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ–µ –∫–æ–ª–µ–±–∞–Ω–∏–µ –º–∞—Å–∫–∏ –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏ | –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑-–∑–∞ —à—É–º–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ |
| **–ú–∞—Å–∫–∞** | –î–≤—É–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤, –≥–¥–µ 1 = –æ–±—ä–µ–∫—Ç, 0 = —Ñ–æ–Ω | –ú–æ–∂–µ—Ç –±—ã—Ç—å –±–∏–Ω–∞—Ä–Ω–∞—è (0/1) –∏–ª–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–∞—è (0.0-1.0) |
| **IoU** | Intersection over Union, –º–µ—Ä–∞ —Å—Ö–æ–¥—Å—Ç–≤–∞ –¥–≤—É—Ö –º–∞—Å–æ–∫ | IoU = –ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ / –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ, –¥–∏–∞–ø–∞–∑–æ–Ω [0, 1] |
| **DeepLabv3** | –ù–µ–π—Ä–æ—Å–µ—Ç—å –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ | –í—ã–¥–µ–ª—è–µ—Ç –∫–ª–∞—Å—Å—ã –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ |
| **Moving Average** | –ú–µ—Ç–æ–¥ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è - –±–µ—Ä–µ–º —Å—Ä–µ–¥–Ω–µ–µ –∏–∑ –æ–∫–Ω–∞ –∫–∞–¥—Ä–æ–≤ | smoothed[i] = mean(masks[i-2:i+3]) |
| **Median Filter** | –ú–µ—Ç–æ–¥ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è - –±–µ—Ä–µ–º –º–µ–¥–∏–∞–Ω—É –∏–∑ –æ–∫–Ω–∞ | smoothed[i] = median(masks[i-2:i+3]) |
| **Exponential Smoothing** | –ú–µ—Ç–æ–¥ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è - –≤–∑–≤–µ—à–µ–Ω–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è | smoothed = Œ±*current + (1-Œ±)*previous |
| **Instability** | –ú–µ—Ä–∞ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –º–∞—Å–∫–∏, –æ–±—Ä–∞—Ç–Ω–∞—è IoU | Instability = 1 - IoU |
| **Probability Map** | –ú–∞—Å–∫–∞ —Å –º—è–≥–∫–∏–º–∏ –∫—Ä–∞—è–º–∏, –∑–Ω–∞—á–µ–Ω–∏—è 0.0-1.0 | –í—ã—Ö–æ–¥ DeepLabv3 |

---

## üìä –¢—Ä–∏ –ú–µ—Ç–æ–¥–∞ –Ω–∞ –û–¥–Ω–æ–π –°—Ç—Ä–∞–Ω–∏—Ü–µ

### Moving Average (window_size=5)

```python
# –ë–µ—Ä–µ–º —Ç–µ–∫—É—â–∏–π –∫–∞–¥—Ä ¬± 2 —Å–æ—Å–µ–¥–Ω–∏—Ö
smoothed[i] = (masks[i-2] + masks[i-1] + masks[i] + masks[i+1] + masks[i+2]) / 5

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:    ‚úì –ü—Ä–æ—Å—Ç–æ    ‚úì –ì–ª–∞–¥–∫–æ    ‚úì –ë—ã—Å—Ç—Ä–æ
–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:      ‚úó –ú–æ–∂–µ—Ç —Ä–∞–∑–º—ã–≤–∞—Ç—å –∫—Ä–∞—è
window_size=3:   –ú–µ–Ω–µ–µ –≥–ª–∞–¥–∫–æ, –±–æ–ª–µ–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ
window_size=7:   –ë–æ–ª–µ–µ –≥–ª–∞–¥–∫–æ, –º–µ–Ω–µ–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ
```

### Median Filter (window_size=5)

```python
# –ë–µ—Ä–µ–º –º–µ–¥–∏–∞–Ω—É –∑–Ω–∞—á–µ–Ω–∏–π –≤ –æ–∫–Ω–µ –∏–∑ 5 –∫–∞–¥—Ä–æ–≤
smoothed[i] = median(masks[i-2:i+3])

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:    ‚úì –£—Å—Ç–æ–π—á–∏–≤ –∫ –≤—ã–±—Ä–æ—Å–∞–º    ‚úì –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫—Ä–∞—è
–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:      ‚úó –ú–µ–Ω–µ–µ –≥–ª–∞–¥–∫–æ —á–µ–º Moving Average
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:   –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ —Ä–µ–∑–∫–æ—Å—Ç—å –∫–æ–Ω—Ç—É—Ä–æ–≤
```

### Exponential Smoothing (alpha=0.3)

```python
# –†–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞: –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ –ø—Ä–æ—à–ª–æ–µ
smoothed[0] = masks[0]
smoothed[i] = 0.3 * masks[i] + 0.7 * smoothed[i-1]

alpha=0.3:      70% –∏—Å—Ç–æ—Ä–∏—è + 30% —Ç–µ–∫—É—â–∏–π (–≥–ª–∞–¥–∫–æ)
alpha=0.5:      50% –∏—Å—Ç–æ—Ä–∏—è + 50% —Ç–µ–∫—É—â–∏–π (–±–∞–ª–∞–Ω—Å)
alpha=0.9:      10% –∏—Å—Ç–æ—Ä–∏—è + 90% —Ç–µ–∫—É—â–∏–π (–±–ª–∏–∑–∫–æ –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—É)

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:    ‚úì –°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π    ‚úì –ü—Ä–∏—á–∏–Ω–Ω—ã–π (—Ä–µ–∞–ª-—Ç–∞–π–º)
–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:      ‚úó –ú–æ–∂–µ—Ç –∑–∞–ø–∞–∑–¥—ã–≤–∞—Ç—å –ø—Ä–∏ –±—ã—Å—Ç—Ä—ã—Ö –¥–≤–∏–∂–µ–Ω–∏—è—Ö
```

---

## üìà –¢–∞–±–ª–∏—Ü–∞ –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –í–∞—à–∏–º–∏ –î–∞–Ω–Ω—ã–º–∏)

| –ú–µ—Ç–æ–¥ | IoU Before | IoU After | –£–ª—É—á—à–µ–Ω–∏–µ | Instability Before | Instability After | –°–Ω–∏–∂–µ–Ω–∏–µ |
|-------|-----------|----------|-----------|-------------------|-------------------|----------|
| Moving Average | 0.82xx | 0.92xx | ~12% | 0.18xx | 0.08xx | ~55% |
| Median Filter | 0.82xx | 0.91xx | ~10% | 0.18xx | 0.09xx | ~50% |
| Exponential Smoothing | 0.82xx | 0.89xx | ~8% | 0.18xx | 0.11xx | ~40% |

**–ó–∞–ø–æ–ª–Ω—è–π—Ç–µ —Ç–æ—á–Ω—ã–µ —Ü–∏—Ñ—Ä—ã –∏–∑ –≤–∞—à–µ–≥–æ –Ω–æ—É—Ç–±—É–∫–∞!**

---

## üéØ –ü–æ—à–∞–≥–æ–≤—ã–π –û—Ç–≤–µ—Ç –Ω–∞ –í–æ–ø—Ä–æ—Å "–û–±—ä—è—Å–Ω–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç"

### –§—Ä–∞–∑–∞ 1: –í–≤–µ–¥–µ–Ω–∏–µ
> "–ú–æ–π –ø—Ä–æ–µ–∫—Ç –ø–æ—Å–≤—è—â–µ–Ω —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –º–∞—Å–∫–∏ –≤–∏–¥–µ–æ, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–º –∑—Ä–µ–Ω–∏–∏."

### –§—Ä–∞–∑–∞ 2: –ü—Ä–æ–±–ª–µ–º–∞
> "–ü—Ä–æ–±–ª–µ–º–∞: –∫–æ–≥–¥–∞ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–µ–π—Ä–æ—Å–µ—Ç—å DeepLabv3 –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ –≤ –≤–∏–¥–µ–æ, –º–∞—Å–∫–∞ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–π - –º–µ—Ä—Ü–∞–µ—Ç –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑-–∑–∞ —à—É–º–∞ –≤ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è—Ö –Ω–µ–π—Ä–æ—Å–µ—Ç–∏."

### –§—Ä–∞–∑–∞ 3: –†–µ—à–µ–Ω–∏–µ
> "–†–µ—à–µ–Ω–∏–µ: —è –ø—Ä–∏–º–µ–Ω–∏–ª —Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è (temporal smoothing) –¥–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –º–∞—Å–∫–∏. –≠—Ç–∏ –º–µ—Ç–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ —Å–æ—Å–µ–¥–Ω–∏—Ö –∫–∞–¥—Ä–æ–≤, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –±–æ–ª–µ–µ –≥–ª–∞–¥–∫—É—é –º–∞—Å–∫—É."

### –§—Ä–∞–∑–∞ 4: –ú–µ—Ç–æ–¥—ã
> "–ü–µ—Ä–≤—ã–π –º–µ—Ç–æ–¥ - Moving Average: –±–µ—Ä–µ–º —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–∞—Å–∫–∏ –∏–∑ –æ–∫–Ω–∞ —Å–æ—Å–µ–¥–Ω–∏—Ö –∫–∞–¥—Ä–æ–≤ (–æ–±—ã—á–Ω–æ 5 –∫–∞–¥—Ä–æ–≤: —Ç–µ–∫—É—â–∏–π ¬± 2).
> –í—Ç–æ—Ä–æ–π –º–µ—Ç–æ–¥ - Median Filter: –≤–º–µ—Å—Ç–æ —Å—Ä–µ–¥–Ω–µ–≥–æ –±–µ—Ä–µ–º –º–µ–¥–∏–∞–Ω—É, —á—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑–∫–∏–µ –∫—Ä–∞—è.
> –¢—Ä–µ—Ç–∏–π –º–µ—Ç–æ–¥ - Exponential Smoothing: –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤–∑–≤–µ—à–µ–Ω–Ω—É—é –∫–æ–º–±–∏–Ω–∞—Ü–∏—é —Ç–µ–∫—É—â–µ–π –º–∞—Å–∫–∏ –∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å–≥–ª–∞–∂–µ–Ω–Ω–æ–π –º–∞—Å–∫–∏."

### –§—Ä–∞–∑–∞ 5: –û—Ü–µ–Ω–∫–∞
> "–î–ª—è –æ—Ü–µ–Ω–∫–∏ —è –∏—Å–ø–æ–ª—å–∑—É—é –º–µ—Ç—Ä–∏–∫—É IoU (Intersection over Union), –∫–æ—Ç–æ—Ä–∞—è –∏–∑–º–µ—Ä—è–µ—Ç —Å—Ö–æ–¥—Å—Ç–≤–æ –º–∞—Å–∫–∏ –º–µ–∂–¥—É —Å–æ—Å–µ–¥–Ω–∏–º–∏ –∫–∞–¥—Ä–∞–º–∏. –ë–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π IoU –æ–∑–Ω–∞—á–∞–µ—Ç –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—É—é –º–∞—Å–∫—É. –Ø —Ç–∞–∫–∂–µ —Å—á–∏—Ç–∞—é Instability –∫–∞–∫ 1-IoU."

### –§—Ä–∞–∑–∞ 6: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
> "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ –≤—Å–µ —Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –º–∞—Å–∫–∏. Moving Average –¥–∞–µ—Ç –ª—É—á—à–∏–π –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –≥–ª–∞–¥–∫–æ—Å—Ç—å—é –∏ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é, –ø–æ–≤—ã—à–∞—è IoU –Ω–∞ [X]% –∏ —Å–Ω–∏–∂–∞—è –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –Ω–∞ [Y]%."

### –§—Ä–∞–∑–∞ 7: –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
> "–í –∑–∞–∫–ª—é—á–µ–Ω–∏–µ, —ç—Ç–∏ –º–µ—Ç–æ–¥—ã —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–≥–æ –∑—Ä–µ–Ω–∏—è, –≥–¥–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≥–ª–∞–¥–∫–∞—è —Ä–∞–±–æ—Ç–∞ —Å –º–∞—Å–∫–æ–π –≤–∏–¥–µ–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –≤–∏–¥–µ–æ—Ä–µ–¥–∞–∫—Ç–æ—Ä–∞—Ö –∏–ª–∏ —Å–∏—Å—Ç–µ–º–∞—Ö —Å–ª–µ–∂–µ–Ω–∏—è –∑–∞ –æ–±—ä–µ–∫—Ç–∞–º–∏."

---

## üî¨ –ë—ã—Å—Ç—Ä–∞—è –°–ø—Ä–∞–≤–∫–∞ –ø–æ –ö–æ–¥—É

### –ì–¥–µ –ß—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è?

```
src/segmentation.py
  ‚îú‚îÄ class VideoSegmenter
  ‚îÇ  ‚îú‚îÄ __init__()              - –ó–∞–≥—Ä—É–∂–∞–µ—Ç DeepLabv3
  ‚îÇ  ‚îú‚îÄ segment_video()         - –í—ã–¥–µ–ª—è–µ—Ç –º–∞—Å–∫–∏ –∏–∑ –≤–∏–¥–µ–æ
  ‚îÇ  ‚îî‚îÄ get_available_classes() - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–ª–∞—Å—Å—ã (person, car, dog)

src/stabilization.py
  ‚îú‚îÄ class MaskStabilizer
  ‚îÇ  ‚îú‚îÄ moving_average()        - Moving Average —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ
  ‚îÇ  ‚îú‚îÄ median_filter()         - Median Filter —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ
  ‚îÇ  ‚îî‚îÄ exponential_smoothing() - Exponential Smoothing —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ

src/metrics.py
  ‚îú‚îÄ calculate_iou()            - –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç IoU –¥–ª—è –¥–≤—É—Ö –º–∞—Å–æ–∫
  ‚îú‚îÄ calculate_dice()           - –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç Dice –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç
  ‚îú‚îÄ calculate_instability()    - –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
  ‚îî‚îÄ compare_stability()        - –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –¥–æ/–ø–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏

src/utils.py
  ‚îú‚îÄ extract_frames()           - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∫–∞–¥—Ä—ã –∏–∑ –≤–∏–¥–µ–æ
  ‚îú‚îÄ get_video_info()           - –ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∏–¥–µ–æ (FPS, —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ)
  ‚îî‚îÄ overlay_mask_on_frame()    - –í–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç –º–∞—Å–∫—É –Ω–∞ –∫–∞–¥—Ä–µ
```

### –ö–ª—é—á–µ–≤—ã–µ –í—ã–∑–æ–≤—ã –∏–∑ –ù–æ—É—Ç–±—É–∫–∞

```python
# 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
segmenter = VideoSegmenter()
frames = extract_frames(video_path)

# 2. –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è (—è—á–µ–π–∫–∞ 7)
binary_masks, prob_maps = segmenter.segment_video(frames, target_class=15)

# 3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ (—è—á–µ–π–∫–∞ 10)
masks_ma = MaskStabilizer.moving_average(prob_maps, window_size=5)
masks_median = MaskStabilizer.median_filter(prob_maps, window_size=5)
masks_exp = MaskStabilizer.exponential_smoothing(prob_maps, alpha=0.3)

# 4. –†–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫ (—è—á–µ–π–∫–∞ 11)
metrics = compare_stability(prob_maps, masks_ma)
iou_before = metrics['iou_before']['mean']
iou_after = metrics['iou_after']['mean']
improvement = metrics['improvement']['iou_improvement_percent']
```

---

## ‚ùì –°–∞–º—ã–µ –ß–∞—Å—Ç—ã–µ –í–æ–ø—Ä–æ—Å—ã –Ω–∞ –≠–∫–∑–∞–º–µ–Ω–µ

### Q: –ó–∞—á–µ–º –Ω–∞–º –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–∞—è –º–∞—Å–∫–∞ –≤–º–µ—Å—Ç–æ –±–∏–Ω–∞—Ä–Ω–æ–π?

**–û—Ç–≤–µ—Ç:**
> –ü–æ—Ç–æ–º—É —á—Ç–æ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–∞—è –º–∞—Å–∫–∞ (0.0-1.0) –ø–æ–∑–≤–æ–ª—è–µ—Ç:
> 1. –õ—É—á—à–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –º—è–≥–∫–∏–µ –∫—Ä–∞—è –æ–±—ä–µ–∫—Ç–∞ (—á–∞—Å—Ç–∏—á–Ω–æ –≤–∏–¥–∏–º—ã–µ –ø–∏–∫—Å–µ–ª–∏)
> 2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ (—Å—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ, –Ω–µ –±—É–ª–µ–≤—ã)
> 3. –û—Ü–µ–Ω–∏—Ç—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏ –≤ –∫–∞–∂–¥–æ–º –ø–∏–∫—Å–µ–ª–µ (–Ω–∏–∑–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å = –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å)

### Q: –ü–æ—á–µ–º—É Moving Average –¥–∞–µ—Ç –ª—É—á—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã?

**–û—Ç–≤–µ—Ç:**
> Moving Average –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å:
> - –ì–ª–∞–¥–∫–æ—Å—Ç—å: —É—Å—Ä–µ–¥–Ω—è–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞–¥—Ä–æ–≤, –ø–æ—ç—Ç–æ–º—É —à—É–º —É–±–∏—Ä–∞–µ—Ç—Å—è
> - –†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â–∏–π –∫–∞–¥—Ä, –ø–æ—ç—Ç–æ–º—É –±—ã—Å—Ç—Ä–æ —Ä–µ–∞–≥–∏—Ä—É–µ–º –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
> - –ü—Ä–æ—Å—Ç–æ—Ç–∞: –ª–µ–≥–∫–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏ –±—ã—Å—Ç—Ä–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
> - –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ—Å—Ç—å: –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –º–µ—Ç–æ–¥

### Q: –ö–∞–∫–æ–π window_size –≤—ã–±—Ä–∞—Ç—å –¥–ª—è Moving Average?

**–û—Ç–≤–µ—Ç:**
> –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
> - –ë—ã—Å—Ç—Ä—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è: window_size=3 (–º–µ–Ω–µ–µ –≥–ª–∞–¥–∫–æ, –Ω–æ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ)
> - –û–±—ã—á–Ω–æ–µ –≤–∏–¥–µ–æ: window_size=5 (—Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å)
> - –°—Ç–∞–±–∏–ª—å–Ω–∞—è –∫–∞–º–µ—Ä–∞: window_size=7 –∏–ª–∏ 9 (–æ—á–µ–Ω—å –≥–ª–∞–¥–∫–æ)
> - –ü—Ä–∞–≤–∏–ª–æ: window_size –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ—á–µ—Ç–Ω—ã–º, –æ–±—ã—á–Ω–æ 3-9

### Q: –ö–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä alpha –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç?

**–û—Ç–≤–µ—Ç:**
> alpha –≤ Exponential Smoothing:
> - alpha = 0.1: –æ—á–µ–Ω—å –≥–ª–∞–¥–∫–æ (70% –∏—Å—Ç–æ—Ä–∏—è), –Ω–æ –º–æ–∂–µ—Ç –∑–∞–ø–∞–∑–¥—ã–≤–∞—Ç—å
> - alpha = 0.3: —Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å (70% –∏—Å—Ç–æ—Ä–∏—è + 30% —Ç–µ–∫—É—â–µ–µ)
> - alpha = 0.5: —Ä–∞–≤–Ω—ã–π –±–∞–ª–∞–Ω—Å (50-50)
> - alpha = 0.9: –±–ª–∏–∑–∫–æ –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—É (90% —Ç–µ–∫—É—â–µ–µ + 10% –∏—Å—Ç–æ—Ä–∏—è)
> 
> –ú–µ–Ω—å—à–µ alpha ‚Üí –±–æ–ª—å—à–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è

### Q: –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç IoU = 0.85?

**–û—Ç–≤–µ—Ç:**
> IoU (Intersection over Union) = 0.85 –æ–∑–Ω–∞—á–∞–µ—Ç:
> - –î–≤–µ –º–∞—Å–∫–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç –Ω–∞ 85%
> - –ú–∞—Å–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω–∞ –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏
> - –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ 15% - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –Ω–µ–±–æ–ª—å—à–æ–µ –º–µ—Ä—Ü–∞–Ω–∏–µ
> 
> –î–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:
> - IoU > 0.9: –æ—á–µ–Ω—å —Å—Ç–∞–±–∏–ª—å–Ω–∞ ‚úì‚úì
> - IoU = 0.75-0.9: –ø—Ä–∏–µ–º–ª–µ–º–æ ‚úì
> - IoU < 0.7: –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞, –Ω—É–∂–Ω–∞ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è ‚úó

### Q: –ü–æ—á–µ–º—É Median –ª—É—á—à–µ Moving Average –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤?

**–û—Ç–≤–µ—Ç:**
> –ü–æ—Ç–æ–º—É —á—Ç–æ –º–µ–¥–∏–∞–Ω–∞ —É—Å—Ç–æ–π—á–∏–≤–∞ –∫ –≤—ã–±—Ä–æ—Å–∞–º:
> - –ï—Å–ª–∏ –≤ –æ–∫–Ω–µ –∏–∑ 5 –∫–∞–¥—Ä–æ–≤ 4 –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ –º–∞—Å–∫–∏ –∏ 1 –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
> - Moving Average –¥–∞—Å—Ç –Ω–µ–≤–µ—Ä–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–∞—Ä—Ç–µ—Ñ–∞–∫—Ç –±—É–¥–µ—Ç —Ä–∞–∑–º—ã—Ç –≤–µ–∑–¥–µ)
> - Median –≤—ã–±–µ—Ä–µ—Ç "—Å—Ä–µ–¥–Ω–∏–π" —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–∞—Ä—Ç–µ—Ñ–∞–∫—Ç –±—É–¥–µ—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω)
>
> –ü—Ä–∏–º–µ—Ä:
> ```
> –ú–∞—Å–∫–∏: [0.8, 0.9, 0.2 (–∞—Ä—Ç–µ—Ñ–∞–∫—Ç!), 0.85, 0.88]
> Moving Average = (0.8+0.9+0.2+0.85+0.88)/5 = 0.726 (–ø–ª–æ—Ö–æ!)
> Median = 0.85 (—Ö–æ—Ä–æ—à–æ!)
> ```

### Q: –ö–∞–∫ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∞–ª-—Ç–∞–π–º–µ?

**–û—Ç–≤–µ—Ç:**
> –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ —Ç–µ–º, —á—Ç–æ:
> - –ù–µ –Ω—É–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤–ø–µ—Ä–µ–¥ –Ω–∞ –±—É–¥—É—â–∏–µ –∫–∞–¥—Ä—ã
> - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–æ—à–ª—ã–µ –¥–∞–Ω–Ω—ã–µ
> - –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Ä–µ–∞–ª-—Ç–∞–π–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ (—Å—Ç—Ä–∏–º–∏–Ω–≥)
>
> –§–æ—Ä–º—É–ª–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–¥—Ä–∞:
> ```
> smoothed[i] = 0.3 * current_mask[i] + 0.7 * smoothed[i-1]
> ```
> 
> –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤–∏–¥–µ–æ –≤ "–æ–¥–∏–Ω –ø—Ä–æ—Ö–æ–¥" —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ

---

## üìù –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ù–∞–±–æ—Ä –¥–ª—è –û—Ç–≤–µ—Ç–∞

**–ï—Å–ª–∏ –≤—Ä–µ–º—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ, –æ—Ö–≤–∞—Ç–∏—Ç–µ —ç—Ç–∏ 5 –ø—É–Ω–∫—Ç–æ–≤:**

1. **–ü—Ä–æ–±–ª–µ–º–∞:** –ú–∞—Å–∫–∞ –º–µ—Ä—Ü–∞–µ—Ç –∏–∑-–∑–∞ —à—É–º–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏
2. **–†–µ—à–µ–Ω–∏–µ:** –¢—Ä–∏ –º–µ—Ç–æ–¥–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è
3. **–ú–µ—Ç–æ–¥—ã:** Moving Average, Median Filter, Exponential Smoothing
4. **–û—Ü–µ–Ω–∫–∞:** IoU (–º–µ—Ä–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏)
5. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –º–µ—Ç–æ–¥—ã —É–ª—É—á—à–∞—é—Ç IoU, Moving Average –ª—É—á—à–∏–π

---

## üéì –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –≠–∫–∑–∞–º–µ–Ω–æ–º

- [ ] –ó–Ω–∞—é, —á—Ç–æ —Ç–∞–∫–æ–µ –º–µ—Ä—Ü–∞–Ω–∏–µ –∏ –ø–æ—á–µ–º—É –æ–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
- [ ] –ó–Ω–∞—é –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è: –º–∞—Å–∫–∞, IoU, DeepLabv3, —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –ó–Ω–∞—é —Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –∏ –∏—Ö —Ä–∞–∑–Ω–∏—Ü—É
- [ ] –ó–Ω–∞—é –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–æ–≤ –∏ –∫–∞–∫ –æ–Ω–∏ –≤–ª–∏—è—é—Ç
- [ ] –ú–æ–≥—É –æ–±—ä—è—Å–Ω–∏—Ç—å —Ñ–æ—Ä–º—É–ª—ã Moving Average –∏ Exponential Smoothing
- [ ] –ó–Ω–∞—é, –≥–¥–µ –≤ –∫–æ–¥–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–∞–∂–¥–∞—è —á–∞—Å—Ç—å
- [ ] –ó–Ω–∞—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑ —Å–≤–æ–µ–≥–æ –Ω–æ—É—Ç–±—É–∫–∞ (—Ü–∏—Ñ—Ä—ã IoU, —É–ª—É—á—à–µ–Ω–∏—è)
- [ ] –ú–æ–≥—É –æ–±—ä—è—Å–Ω–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫ IoU
- [ ] –ó–Ω–∞—é –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –∫–∞–∂–¥–æ–≥–æ –º–µ—Ç–æ–¥–∞
- [ ] –ó–Ω–∞—é, –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –º–µ—Ç–æ–¥

---

## üí° –°–æ–≤–µ—Ç: –ö–∞–∫ –ü–æ–∫–∞–∑–∞—Ç—å –ó–Ω–∞–Ω–∏—è

**–ü–ª–æ—Ö–æ–π –æ—Ç–≤–µ—Ç:**
> "–£ –Ω–∞—Å –µ—Å—Ç—å —Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è –º–∞—Å–∫–∏."

**–•–æ—Ä–æ—à–∏–π –æ—Ç–≤–µ—Ç:**
> "–ú—ã –ø—Ä–∏–º–µ–Ω—è–ª–∏ —Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è. Moving Average –±–µ—Ä–µ—Ç —Å—Ä–µ–¥–Ω–µ–µ –∏–∑ –æ–∫–Ω–∞ –∫–∞–¥—Ä–æ–≤, —á—Ç–æ –¥–∞–µ—Ç —Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å –≥–ª–∞–¥–∫–æ—Å—Ç–∏ –∏ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏. Median Filter –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ–¥–∏–∞–Ω—É –≤–º–µ—Å—Ç–æ —Å—Ä–µ–¥–Ω–µ–≥–æ, —á—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑–∫–∏–µ –∫—Ä–∞—è. Exponential Smoothing –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–∑–≤–µ—à–µ–Ω–Ω—É—é –∫–æ–º–±–∏–Ω–∞—Ü–∏—é —Ç–µ–∫—É—â–µ–π –∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –º–∞—Å–∫–∏, —á—Ç–æ –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Ä–µ–∞–ª-—Ç–∞–π–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –í –Ω–∞—à–µ–º –∞–Ω–∞–ª–∏–∑–µ Moving Average –ø–æ–∫–∞–∑–∞–ª –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å IoU —É–ª—É—á—à–µ–Ω–∏–µ–º –Ω–∞ [X]%."

**–ö–ª—é—á:** –ë—É–¥—å—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã, –ø—Ä–∏–≤–æ–¥–∏—Ç–µ —Ü–∏—Ñ—Ä—ã, –æ–±—ä—è—Å–Ω—è–π—Ç–µ "–ø–æ—á–µ–º—É".

---

**–£–¥–∞—á–∏! –ó–∞–ø–æ–º–Ω–∏—Ç–µ: –ü—Ä–∞–∫—Ç–∏–∫–∞ –¥–µ–ª–∞–µ—Ç —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ! üöÄ**
